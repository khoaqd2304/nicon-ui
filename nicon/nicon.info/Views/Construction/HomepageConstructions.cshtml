@model HomePageConstructionItemsModel
@using Nop.Web.Models.Construction
@{
    int index = 0;
}
@if (Model.ConstructionsItems.Count > 0)
{
    <div class="home-page-construction">




        <div id="construction-tab"><span>@T("tab.homepage.construction")</span></div>
        <div id="projectCompleted">
            @if (ViewBag.CheckIsMobile)
            {
                @* foreach (var item in Model.ConstructionsItems)
        { *@
                //if (index == 0)
                //{
                <script>
                    fetch('/projectscompleted')
                        .then(response => response.text())
                        .then(html => {
                            const parser = new DOMParser();
                            const doc = parser.parseFromString(html, 'text/html');
                            const products = doc.querySelectorAll('.product');

                            
                                // Lấy thông tin của sản phẩm đầu tiên
                                const product1 = products[0];
                                const title1 = product1.querySelector('.metropole').innerText
                                const short1 = product1.querySelector('.subtitle').innerHTML
                                const imageurl1 = product1.querySelector('.widows-div').style.backgroundImage.slice(5, -2)
                                const ahref1 = product1.querySelector('.metropole').getAttribute("href")
                                // Lấy thông tin của sản phẩm thứ hai 
                                const product2 = products[1];
                                const title2 = product2.querySelector('.metropole').innerText
                                const short2 = product2.querySelector('.subtitle').innerHTML
                                const imageurl2 = product2.querySelector('.widows-div').style.backgroundImage.slice(5, -2)
                                const ahref2 = product2.querySelector('.metropole').getAttribute("href")
                                htmltext = `

           <div class="field field-name-field-bloc-dp-texte field-type-text-with-summary field-label-hidden view-mode-full">
                            <div class="field-items">
                                <div class="field-item even">
                                    <div class="image">
                                        <div class="field field-name-field-vignette-dd field-type-image field-label-hidden view-mode-full">
                                            <div class="field-items">
                                                <p>
                                                    <a href="${ahref1}">
                                                        <img typeof="foaf:Image" class="image-center" src="${imageurl1}" style="width: 100%; height: 243px;" alt="${title1}">
                                                    </a>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="field field-name-field-bloc-carri-res field-type-text-with-summary field-label-hidden view-mode-full">
                            <div class="field-item">
                                <div class="publication publication-mobile" style="cursor: pointer;" onclick="window.location='${ahref1}';">
                                    <h2> <strong>${title1}</strong></h2 >
                                        ${ short1 }
                                <p><a class="mon-lien-plus" href="${ahref1}">@T("homepage.detail")</a></p>
                                </div >
                            </div >
                        </div >

          <div class="field field-name-field-bloc-dp-texte field-type-text-with-summary field-label-hidden view-mode-full">
                            <div class="field-items">
                                <div class="field-item even">
                                    <div class="image">
                                        <div class="field field-name-field-vignette-dd field-type-image field-label-hidden view-mode-full">
                                            <div class="field-items">
                                                <p>
                                                    <a href="${ahref2}">
                                                        <img typeof="foaf:Image" class="image-center" src="${imageurl2}" style="width: 100%; height: 243px;" alt="${title2}">
                                                    </a>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="field field-name-field-bloc-carri-res field-type-text-with-summary field-label-hidden view-mode-full">
                            <div class="field-item">
                                <div class="publication publication-mobile" style="cursor: pointer;" onclick="window.location='${ahref2}';">
                                    <h2><strong>${title2}</strong></h2>
                                   ${short2}
                                    <p><a class="mon-lien-plus" href="${ahref2}">@T("homepage.detail")</a></p>
                                </div>
                            </div>
                        </div>
                        `
                        document.querySelector('#projectCompleted').innerHTML = htmltext;

                 
                    })
                    .catch(error => {
                      console.error('Error :', error);
                    });
                </script>


                //}
                @*else
        {
        <div class="field field-name-field-bloc-dp-texte field-type-text-with-summary field-label-hidden
        view-mode-full">
        <div class="field-items">
        <div class="field-item even">
        <div class="image">
        <div class="field field-name-field-vignette-dd field-type-image field-label-hidden view-mode-full">
        <div class="field-items">
        <p>
        <a href="@Url.RouteUrl("ConstructionsItems", new { SeName = item.SeName })">
        <img typeof="foaf:Image" class="image-center" src="@item.ImageUrl" style="width: 100%; height: 243px;"
        alt="@item.Title">
        </a>
        </p>
        </div>
        </div>
        </div>
        </div>
        </div>
        </div>
        <div class="field field-name-field-bloc-carri-res field-type-text-with-summary field-label-hidden
        view-mode-full">
        <div class="field-item">
        <div class="publication-2-1" style="cursor: pointer;"
        onclick="window.location='@Url.RouteUrl("ConstructionsItems", new { SeName = item.SeName })';">
        <h2><strong>@item.Title</strong></h2>
        @Html.Raw(@item.Short)
        <p><a class="mon-lien-plus" href="@Url.RouteUrl("ConstructionsItems", new { SeName = item.SeName
        })">@T("homepage.detail")</a></p>
        </div>
        </div>
        </div>
        }
        index++;*@
                @* } *@
            }
            else
            {
                @*
        foreach (var item in Model.ConstructionsItems)
        {
        if (index == 0)
        {
        <div class="field field-name-field-bloc-dp-texte field-type-text-with-summary field-label-hidden
        view-mode-full">
        <div class="field-items">
        <div class="field-item even">
        <div class="publication" style="cursor: pointer;" onclick="window.location='@Url.RouteUrl("ConstructionsItems",
        new { SeName = item.SeName })';">
        <h2><strong>@item.Title</strong></h2>
        @Html.Raw(@item.Short)
        <p><a class="mon-lien-plus" href="@Url.RouteUrl("ConstructionsItems", new { SeName = item.SeName
        })">@T("homepage.detail")</a></p>
        </div>
        </div>
        </div>
        </div>
        <div class="field field-name-field-bloc-carri-res field-type-text-with-summary field-label-hidden
        view-mode-full">
        <div class="field-item">
        <div class="field-item even">
        <p>
        <a href="@Url.RouteUrl("ConstructionsItems", new { SeName = item.SeName })">
        <img href="@Url.RouteUrl("ConstructionsItems", new { SeName = item.SeName })" alt="@item.Title"
        src="@item.ImageUrl" style="width: 100%; height: 243px;">
        </a>
        </p>

        </div>
        </div>
        </div>
        }
        else
        {
        <div class="field field-name-field-bloc-dp-texte field-type-text-with-summary field-label-hidden
        view-mode-full">
        <div class="field-items">
        <div class="field-item even">
        <div class="image">
        <div class="field field-name-field-vignette-dd field-type-image field-label-hidden view-mode-full">
        <div class="field-items">
        <p>
        <a href="@Url.RouteUrl("ConstructionsItems", new { SeName = item.SeName })">
        <img typeof="foaf:Image" class="image-center" src="@item.ImageUrl" style="width: 100%; height: 243px;"
        alt="@item.Title">
        </a>
        </p>
        </div>
        </div>
        </div>
        </div>
        </div>
        </div>
        <div class="field field-name-field-bloc-carri-res field-type-text-with-summary field-label-hidden
        view-mode-full">
        <div class="field-item">
        <div class="publication-2-1" style="cursor: pointer;"
        onclick="window.location='@Url.RouteUrl("ConstructionsItems", new { SeName = item.SeName })';">
        <h2><strong>@item.Title</strong></h2>
        @Html.Raw(@item.Short)
        <p><a class="mon-lien-plus" href="@Url.RouteUrl("ConstructionsItems", new { SeName = item.SeName
        })">@T("homepage.detail")</a></p>
        </div>
        </div>
        </div>
        }
        index++;
        }*@

                @*get project from projectCompleted*@
                <script>
                  fetch('/projectscompleted')
                    .then(response => response.text())
                    .then(html => {
                      const parser = new DOMParser();
                      const doc = parser.parseFromString(html, 'text/html');
                      const products = doc.querySelectorAll('.product');
                    htmltext=""
                      if (products.length > 0) {
                        // Lấy thông tin của sản phẩm đầu tiên
                        const product1 = products[0];
                        const title1=product1.querySelector('.metropole').innerText
                        const short1=product1.querySelector('.subtitle').innerHTML
                        const imageurl1=product1.querySelector('.widows-div').style.backgroundImage.slice(5, -2)
                        const ahref1=product1.querySelector('.metropole').getAttribute("href")
                        // Lấy thông tin của sản phẩm thứ hai
                        const product2 = products[1];
                          const title2=product2.querySelector('.metropole').innerText
                          const short2=product2.querySelector('.subtitle').innerHTML
                          const imageurl2=product2.querySelector('.widows-div').style.backgroundImage.slice(5, -2)
                          const ahref2=product2.querySelector('.metropole').getAttribute("href")
                        htmltext=`
                              <div class="field field-name-field-bloc-dp-texte field-type-text-with-summary field-label-hidden view-mode-full" >
                                  <div class="field-items">
                                      <div class="field-item even">
                                          <div class="publication" style="cursor: pointer;" onclick="${ahref1}';">
                                              <h2><strong>${title1}</strong></h2>
                                              ${short1}
                                              <p><a class="mon-lien-plus" href="${ahref1}">@T("homepage.detail")</a></p>
                                          </div>
                                      </div>
                                  </div>
        </div >
        <div class="field field-name-field-bloc-carri-res field-type-text-with-summary field-label-hidden view-mode-full">
            <div class="field-item">
                <div class="field-item even">
                    <p>
                        <a href="${ahref1}">
                            <img href="${ahref1}" alt="${title1}" src="${imageurl1}" style="width: 100%; height: 243px;">
                        </a>
                    </p>

                </div>
            </div>
        </div>
         <div class="field field-name-field-bloc-dp-texte field-type-text-with-summary field-label-hidden view-mode-full">
                            <div class="field-items">
                                <div class="field-item even">
                                    <div class="image">
                                        <div class="field field-name-field-vignette-dd field-type-image field-label-hidden view-mode-full">
                                            <div class="field-items">
                                                <p>
                                                    <a href="${ahref2}">
                                                        <img typeof="foaf:Image" class="image-center" src="${imageurl2}" style="width: 100%; height: 243px;" alt="${title2}">
                                                    </a>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="field field-name-field-bloc-carri-res field-type-text-with-summary field-label-hidden view-mode-full">
                            <div class="field-item">
                                <div class="publication-2-1" style="cursor: pointer;" onclick="window.location='${ahref2}';">
                                    <h2><strong>${title2}</strong></h2>
                                    ${short2}
                                    <p><a class="mon-lien-plus" href="${ahref2}">@T("homepage.detail")</a></p>
                                </div>
                            </div>
                        </div>
                        `
                        document.querySelector('#projectCompleted').innerHTML = htmltext;

                      } else {
                        
                      }
                    })
                    .catch(error => {
                      console.error('Error:', error);
                    });
                </script>
            }
        </div>
        <!--update 08/10/20024 -->
        <div class="field field-name-field-bloc-dp-texte field-type-text-with-summary field-label-hidden view-mode-full"
            style="width:100%">
            <div class="field-items">
                <div class="field-item even">
                    <a href="/projectscompleted" style="color:#ed1c24;float:right">@T("seemore") <span><svg
                                xmlns="http://www.w3.org/2000/svg" width="18" height="12" fill="currentColor"
                                class="bi bi-chevron-right" viewBox="0 0 16 16">
                                <path fill-rule="evenodd"
                                    d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708" />
                            </svg></span></a>
                </div>
            </div>
        </div>


    </div>
}
